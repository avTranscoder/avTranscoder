os:
  - linux
  - osx

matrix:
  allow_failures:
    - os: osx

language: cpp

compiler:
  - gcc
  - clang

before_script:
  - date -u
  - uname -a
  - env | sort
  
  - chmod +x tools/CI/travis.linux.install.deps.sh
  - chmod +x tools/CI/travis.osx.install.deps.sh
  - if [ "${TRAVIS_OS_NAME}" = "linux" ]; then ./tools/CI/travis.linux.install.deps.sh; fi
  - if [ "${TRAVIS_OS_NAME}" = "osx" ]; then tools/CI/travis.osx.install.deps.sh; fi
  
  - if [ "${TRAVIS_OS_NAME}" = "linux" ]; then ln -s tools/scons.travis.linux.cfg scons.cfg; fi
  - if [ "${TRAVIS_OS_NAME}" = "osx" ]; then ln -s tools/scons.travis.osx.cfg scons.cfg; fi

script:
  - scons

after_failure:
  - cat config.log

